<div>
  <div class="mt-3">
    <div class="flex justify-content-center flex-wrap">
      <p-dropdown (onChange)="cambiarProvincia()"  placeholder="Elija una provincia" inputId="provincias" appendTo="body" optionValue="id"
                  [(ngModel)]="idProvinciaElegida" [options]="provincias" optionLabel="nombre"></p-dropdown>

      <p-selectButton  (onOptionClick)="aplicarFiltros()" [options]="filtros" [(ngModel)]="filtrosSeleccionados" [multiple]="true" optionLabel="nombre"></p-selectButton>
    </div>

    <!-- Pruebas para el desarrollo-->
    <div>
      <div *ngIf="pruebasDesarrollo" style="background-color: darkseagreen">
        <p>Provincia elegidaID: {{idProvinciaElegida}}</p>
        <!--        <p>Provincias: {{provincias | json}}</p>-->
        <!--        <p>Favores: {{favoresOriginal |json}}</p>-->
        <p>FavorDialogo: {{favorDialogo |json}}</p>
        <p>TodosLosFiltros: {{filtrosSeleccionados | json}}</p>
      </div>
    </div>

    <!--  Tarjetas de cada favor-->
    <ng-container>
      <div *ngIf="favoresOriginal.length == 0">
        <div class="p-message p-message-error p-3">No hay ningún resultado</div>
      </div>
      <div *ngIf="favoresOriginal.length > 0" class="flex justify-content-center flex-wrap">
        <p-card *ngFor="let favor of favoresFiltrados" [header]="favor.descripcion" [style]="{ width: '300px' }" class="m-3">
          <ng-template pTemplate="header">
            <img *ngIf="favor.foto != null && favor.foto != ''" class="h-13rem p-2 shadow-1" alt="Imagen de {{favor.descripcion}}"
                 [src]="favor.foto"/>
            <img *ngIf="favor.foto == null || favor.foto == ''" class="h-13rem p-2 px-6 shadow-1"
                 alt="Imagen de {{favor.descripcion}}" src="assets/img/imagenDefecto.png"/>
          </ng-template>
          <ng-template pTemplate="content">
            <div [style]="{ height: '40px' }">
              <p-tag class="m-1" *ngIf="favor.fumar" value="Fumar" [rounded]="true"></p-tag>
              <p-tag class="m-1" *ngIf="favor.internet" value="Internet" [rounded]="true"></p-tag>
              <p-tag class="m-1" *ngIf="favor.mascota" value="Mascota" [rounded]="true"></p-tag>
              <p-tag class="m-1" *ngIf="favor.climatizacion" value="Climatización" [rounded]="true"></p-tag>
              <p-tag class="m-1" *ngIf="favor.adaptadoMovilidadReducida" value="Adaptado movilidad reducida" [rounded]="true"></p-tag>
            </div>
          </ng-template>
          <ng-template pTemplate="footer">
            <p-button class="w-1" (click)="abrirDialogoContacto(favor)" label="Contactar"></p-button>
            <p-dialog [header]="favorDialogo?.descripcion" [maximizable]="true" [(visible)]="dialogoContactar" [style]="{width: '50vw'}" >
              <div *ngIf="favorDialogo != null">
                <p>Nombre: {{favorDialogo.usuario.nombre}}</p>
                <p>Provincia: {{favorDialogo.usuario.direccion.provincia.nombre}}</p>
                <p>Dirección: {{favorDialogo.usuario.direccion.direccion}}</p>
                <p>Email: {{favorDialogo.usuario.email}}</p>
                <p>Telefono: {{favorDialogo.telefono}}</p>
              </div>
            </p-dialog>
          </ng-template>
        </p-card>
      </div>
    </ng-container>
  </div>
</div>
